## Propósito del Script: análisis de FTA (Alcance de Objetivo Fraccional)
##
## Autor: Daniel S. Parra González
## Fecha de creación: 24-06-2020
##
## Copyright (c) Daniel S. Parra, 2020
##
## Email: dsparrag@unal.edu.co
##------------------------------------------------------------------------------#
# Carga de paquetes
require(gt)
require(magrittr)
require(scales)
require(readxl)
require(tidyverse)
# Vector con puntos
MIC_vec = c(1 * (2 ^ (seq(-10, 10, 1))))
#-------------------------------------------------------------------------------#
# Lectura EUCAST ------------------------------------------------------
#-------------------------------------------------------------------------------#
# Lectura de archivo de EUCAST para cefepime
eucast_df <- read_excel('data/EUCAST/EUCAST_Wild_Type.xlsx',
sheet = 'EUCAST_CEP', skip = 4, na = 'ND',
.name_repair = "minimal")
#' 1 Colapsar tabla de datos con columna de MIC, y columna de N
#' 2 Agrupar por microorganismos
#' 3 Cambiar el MIC por la secuencia de potencias de 2 correcta _MIC_
#' 4 Calcular frecuencia de aislamientos por microorganismo vs MIC _Frc_
#'
eucast_df1 <- eucast_df %>%
pivot_longer(cols = matches("[0-9]"),
names_to = 'MIC', values_to = 'Number') %>%
group_by(Microorganism) %>%
mutate(MIC = 2^(-9:9),
Frc = Number/sum(Number))
G1 <- eucast_df %>%
ggplot(aes(x = Observations, y = fct_reorder(Microorganism, Observations))) +
geom_bar(stat = 'identity') +
theme_bw() +
xlab('Observaciones') + ylab('Microrganismo') +
labs(title = 'Número de observaciones EUCAST',
subtitle = 'Fármaco: Cefepime')
##------------------------------------------------------------------------------#
## Nombre del Script: Análisis de FTA -----------------------------------------
##
## Propósito del Script: análisis de FTA (Alcance de Objetivo Fraccional)
##
## Autor: Daniel S. Parra González
## Fecha de creación: 24-06-2020
##
## Copyright (c) Daniel S. Parra, 2020
##
## Email: dsparrag@unal.edu.co
##------------------------------------------------------------------------------#
# Carga de paquetes
require(gt)
require(magrittr)
require(scales)
require(readxl)
require(tidyverse)
# Vector con puntos
MIC_vec = c(1 * (2 ^ (seq(-10, 10, 1))))
#-------------------------------------------------------------------------------#
# Lectura EUCAST ------------------------------------------------------
#-------------------------------------------------------------------------------#
# Lectura de archivo de EUCAST para cefepime
eucast_df <- read_excel('data/EUCAST/EUCAST_Wild_Type.xlsx',
sheet = 'EUCAST_CEP', skip = 4, na = 'ND',
.name_repair = "minimal")
#' 1 Colapsar tabla de datos con columna de MIC, y columna de N
#' 2 Agrupar por microorganismos
#' 3 Cambiar el MIC por la secuencia de potencias de 2 correcta _MIC_
#' 4 Calcular frecuencia de aislamientos por microorganismo vs MIC _Frc_
#'
eucast_df1 <- eucast_df %>%
pivot_longer(cols = matches("[0-9]"),
names_to = 'MIC', values_to = 'Number') %>%
group_by(Microorganism) %>%
mutate(MIC = 2^(-9:9),
Frc = Number/sum(Number))
# > Gráficos distribuciones -----------------------------------------------
G1 <- eucast_df %>%
ggplot(aes(x = Observations, y = fct_reorder(Microorganism, Observations))) +
geom_bar(stat = 'identity') +
theme_bw() +
xlab('Observaciones') + ylab('Microrganismo') +
labs(title = 'Número de observaciones EUCAST',
subtitle = 'Fármaco: Cefepime')
G2 <- eucast_df1 %>%
##------------------------------------------------------------------------------#
## Nombre del Script: Análisis de FTA -----------------------------------------
##
## Propósito del Script: análisis de FTA (Alcance de Objetivo Fraccional)
##
## Autor: Daniel S. Parra González
## Fecha de creación: 24-06-2020
##
## Copyright (c) Daniel S. Parra, 2020
##
## Email: dsparrag@unal.edu.co
##------------------------------------------------------------------------------#
# Carga de paquetes
require(gt)
require(magrittr)
require(scales)
require(readxl)
require(tidyverse)
# Vector con puntos
MIC_vec = c(1 * (2 ^ (seq(-10, 10, 1))))
#-------------------------------------------------------------------------------#
# Lectura EUCAST ------------------------------------------------------
#-------------------------------------------------------------------------------#
# Lectura de archivo de EUCAST para cefepime
eucast_df <- read_excel('data/EUCAST/EUCAST_Wild_Type.xlsx',
sheet = 'EUCAST_CEP', skip = 4, na = 'ND',
.name_repair = "minimal")
#' 1 Colapsar tabla de datos con columna de MIC, y columna de N
#' 2 Agrupar por microorganismos
#' 3 Cambiar el MIC por la secuencia de potencias de 2 correcta _MIC_
#' 4 Calcular frecuencia de aislamientos por microorganismo vs MIC _Frc_
#'
eucast_df1 <- eucast_df %>%
pivot_longer(cols = matches("[0-9]"),
names_to = 'MIC', values_to = 'Number') %>%
group_by(Microorganism) %>%
mutate(MIC = 2^(-9:9),
Frc = Number/sum(Number))
# > Gráficos distribuciones -----------------------------------------------
G1 <- eucast_df %>%
ggplot(aes(x = Observations, y = fct_reorder(Microorganism, Observations))) +
geom_bar(stat = 'identity') +
theme_bw() +
xlab('Observaciones') + ylab('Microrganismo') +
labs(title = 'Número de observaciones EUCAST',
subtitle = 'Fármaco: Cefepime')
G2 <- eucast_df1 %>%
filter(Observations > 1000) %>%
filter(MIC > 0.001 & MIC < 513) %>%
mutate(MIC = round(MIC, digits = 3),
ECOFF = round(ECOFF, digits = 3)) %>%
ggplot(aes(x = factor(MIC), y = Frc)) +
geom_bar(stat = 'identity', fill = 'gray', col = 'black') +
theme_bw() +
geom_vline(aes(xintercept = factor(ECOFF)), lty= 'dashed', col='blue4') +
facet_wrap(. ~ Microorganism) +
# scale_x_discrete(guide = guide_axis(n.dodge = 2)) +
# scale_x_continuous(trans = log2_trans(),
#                    breaks = trans_breaks("log2", function(x) 2^x),
#                    labels = trans_format("log2", math_format(2^.x))) +
ylab('Proporción de aislamientos') +
labs(title = 'Distribuciones EUCAST frente a cefepime',
subtitle = '') +
theme(axis.text.x = element_text(angle = 90))
##------------------------------------------------------------------------------#
## Nombre del Script: Análisis de FTA -----------------------------------------
##
## Propósito del Script: análisis de FTA (Alcance de Objetivo Fraccional)
##
## Autor: Daniel S. Parra González
## Fecha de creación: 24-06-2020
##
## Copyright (c) Daniel S. Parra, 2020
##
## Email: dsparrag@unal.edu.co
##------------------------------------------------------------------------------#
# Carga de paquetes
require(gt)
require(magrittr)
require(scales)
require(readxl)
require(tidyverse)
# Vector con puntos
MIC_vec = c(1 * (2 ^ (seq(-10, 10, 1))))
#-------------------------------------------------------------------------------#
# Lectura EUCAST ------------------------------------------------------
#-------------------------------------------------------------------------------#
# Lectura de archivo de EUCAST para cefepime
eucast_df <- read_excel('data/EUCAST/EUCAST_Wild_Type.xlsx',
sheet = 'EUCAST_CEP', skip = 4, na = 'ND',
.name_repair = "minimal")
#' 1 Colapsar tabla de datos con columna de MIC, y columna de N
#' 2 Agrupar por microorganismos
#' 3 Cambiar el MIC por la secuencia de potencias de 2 correcta _MIC_
#' 4 Calcular frecuencia de aislamientos por microorganismo vs MIC _Frc_
#'
eucast_df1 <- eucast_df %>%
pivot_longer(cols = matches("[0-9]"),
names_to = 'MIC', values_to = 'Number') %>%
group_by(Microorganism) %>%
mutate(MIC = 2^(-9:9),
Frc = Number/sum(Number))
# > Gráficos distribuciones -----------------------------------------------
G1 <- eucast_df %>%
ggplot(aes(x = Observations, y = fct_reorder(Microorganism, Observations))) +
geom_bar(stat = 'identity') +
theme_bw() +
xlab('Observaciones') + ylab('Microrganismo') +
labs(title = 'Número de observaciones EUCAST',
subtitle = 'Fármaco: Cefepime')
##------------------------------------------------------------------------------#
## Nombre del Script: Análisis de FTA -----------------------------------------
##
## Propósito del Script: análisis de FTA (Alcance de Objetivo Fraccional)
##
## Autor: Daniel S. Parra González
## Fecha de creación: 24-06-2020
##
## Copyright (c) Daniel S. Parra, 2020
##
## Email: dsparrag@unal.edu.co
##------------------------------------------------------------------------------#
# Carga de paquetes
require(gt)
require(magrittr)
require(scales)
require(readxl)
require(tidyverse)
# Vector con puntos
MIC_vec = c(1 * (2 ^ (seq(-10, 10, 1))))
#-------------------------------------------------------------------------------#
# Lectura EUCAST ------------------------------------------------------
#-------------------------------------------------------------------------------#
# Lectura de archivo de EUCAST para cefepime
eucast_df <- read_excel('data/EUCAST/EUCAST_Wild_Type.xlsx',
sheet = 'EUCAST_CEP', skip = 4, na = 'ND',
.name_repair = "minimal")
#' 1 Colapsar tabla de datos con columna de MIC, y columna de N
#' 2 Agrupar por microorganismos
#' 3 Cambiar el MIC por la secuencia de potencias de 2 correcta _MIC_
#' 4 Calcular frecuencia de aislamientos por microorganismo vs MIC _Frc_
#'
eucast_df1 <- eucast_df %>%
pivot_longer(cols = matches("[0-9]"),
names_to = 'MIC', values_to = 'Number') %>%
group_by(Microorganism) %>%
mutate(MIC = 2^(-9:9),
Frc = Number/sum(Number))
# > Gráficos distribuciones -----------------------------------------------
G1 <- eucast_df %>%
ggplot(aes(x = Observations, y = fct_reorder(Microorganism, Observations))) +
geom_bar(stat = 'identity') +
theme_bw() +
xlab('Observaciones') + ylab('Microrganismo') +
labs(title = 'Número de observaciones EUCAST',
subtitle = 'Fármaco: Cefepime')
##------------------------------------------------------------------------------#
## Nombre del Script: Análisis de FTA -----------------------------------------
##
## Propósito del Script: análisis de FTA (Alcance de Objetivo Fraccional)
##
## Autor: Daniel S. Parra González
## Fecha de creación: 24-06-2020
##
## Copyright (c) Daniel S. Parra, 2020
##
## Email: dsparrag@unal.edu.co
##------------------------------------------------------------------------------#
# Carga de paquetes
require(gt)
require(magrittr)
require(scales)
require(readxl)
require(tidyverse)
# Vector con puntos
MIC_vec = c(1 * (2 ^ (seq(-10, 10, 1))))
#-------------------------------------------------------------------------------#
# Lectura EUCAST ------------------------------------------------------
#-------------------------------------------------------------------------------#
# Lectura de archivo de EUCAST para cefepime
eucast_df <- read_excel('data/EUCAST/EUCAST_Wild_Type.xlsx',
sheet = 'EUCAST_CEP', skip = 4, na = 'ND',
.name_repair = "minimal")
#' 1 Colapsar tabla de datos con columna de MIC, y columna de N
#' 2 Agrupar por microorganismos
#' 3 Cambiar el MIC por la secuencia de potencias de 2 correcta _MIC_
#' 4 Calcular frecuencia de aislamientos por microorganismo vs MIC _Frc_
#'
eucast_df1 <- eucast_df %>%
pivot_longer(cols = matches("[0-9]"),
names_to = 'MIC', values_to = 'Number') %>%
group_by(Microorganism) %>%
mutate(MIC = 2^(-9:9),
Frc = Number/sum(Number))
# > Gráficos distribuciones -----------------------------------------------
G1 <- eucast_df %>%
ggplot(aes(x = Observations, y = fct_reorder(Microorganism, Observations))) +
geom_bar(stat = 'identity') +
theme_bw() +
xlab('Observaciones') + ylab('Microrganismo') +
labs(title = 'Número de observaciones EUCAST',
subtitle = 'Fármaco: Cefepime')
##------------------------------------------------------------------------------#
## Nombre del Script: Análisis de FTA -----------------------------------------
##
## Propósito del Script: análisis de FTA (Alcance de Objetivo Fraccional)
##
## Autor: Daniel S. Parra González
## Fecha de creación: 24-06-2020
##
## Copyright (c) Daniel S. Parra, 2020
##
## Email: dsparrag@unal.edu.co
##------------------------------------------------------------------------------#
# Carga de paquetes
require(gt)
require(magrittr)
require(scales)
require(readxl)
require(tidyverse)
# Vector con puntos
MIC_vec = c(1 * (2 ^ (seq(-10, 10, 1))))
#-------------------------------------------------------------------------------#
# Lectura EUCAST ------------------------------------------------------
#-------------------------------------------------------------------------------#
# Lectura de archivo de EUCAST para cefepime
eucast_df <- read_excel('data/EUCAST/EUCAST_Wild_Type.xlsx',
sheet = 'EUCAST_CEP', skip = 4, na = 'ND',
.name_repair = "minimal")
